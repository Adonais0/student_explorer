{% load filters %}

{% block head %}
{% load staticfiles %}
  <script src='{% static 'seumich/sort_table.js' %}'></script>
{% endblock %}

<table class="table student-class-site-list-table">
  <thead>
    <tr>
      <th scope="col" class="hide-small"><a href="#" onClick="return false;">Course Site</a></th>
      <th scope="col" class="hide-small"><a href="#" onClick="return false;">Status</a></th>
      <th scope="col" class="hide-small"><a href="#" onClick="return false;">Current Percentage</a></th>
    </tr>
    <tr>
      <td colspan="2"></td>
      <td>
        <p class="legend-text"><span class="legend-key student-legend-key"></span>Student</p>
        <p class="legend-text"><span class="legend-key class-legend-key"></span>Class Average</p>
      </td>
    </tr>
  </thead>
  <tbody>
    {% for classSite in classSites %}
    <tr>
      <th scope="row" class="class-site-title"><a href="/students/{{student.username}}/class_sites/{{classSite.code}}/">{{ classSite.description }}</a></th>
      <td>
         {% load static %} {% static "" as baseUrl %}
         <span data-toggle="tooltip" title="{{ student.studentclasssitestatus_set.all|get_student_class_status:classSite|status_to_text }}" data-placement="bottom">
         <img src="{{ baseUrl }}/images/Status_Icons_{{ student.studentclasssitestatus_set.all|get_student_class_status:classSite }}.png" width="25px" hspace="3"></img></span>
      </td>
      <td>
        <div class="average-bar-container">
          <div class="average-bar student-average-bar" role="progressbar" aria-valuenow="{{ student.studentclasssitescore_set.all|get_student_score:classSite }}"
            aria-valuemin="0" aria-valuemax="100" style="width: {{ student.studentclasssitescore_set.all|get_student_score:classSite }}%;">
            <p class="average-bar-text">{{ student.studentclasssitescore_set.all|get_student_score:classSite }}%</p>
            <span class="sr-only">Student Percentage: {{ student.studentclasssitescore_set.all|get_student_score:classSite }}%</span>
          </div>
        </div>
        <div class="average-bar-container">
          <div class="average-bar class-average-bar" role="progressbar" aria-valuenow="{{ classSite.classsitescore_set.all|get_class_score }}"
            aria-valuemin="0" aria-valuemax="100" style="width: {{ classSite.classsitescore_set.all|get_class_score }}%;">
            <p class="average-bar-text">{{ classSite.classsitescore_set.all|get_class_score }}%</p>
            <span class="sr-only">Class Average Percentage: {{ classSite.classsitescore_set.all|get_class_score }}%</span>
          </div>
        </div>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
