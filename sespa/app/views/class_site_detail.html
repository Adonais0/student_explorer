<div ng-if="student && classSite" ng-cloak class="col-lg-12">

  <h2 class="sub-header">{{student.first_name}} {{student.last_name}}
    <a class="pull-right backlink" href="#/students/{{student.username}}/">
      < Back to Course List<p>
    </a>
  </h2>


  <hr class="main-no-margin-top" />
  <h3 class="main-h3">Course Site: {{classSite.class_site.description}}</h3>
  <p>
    <status-tooltip status="classSite.status"></status-tooltip>
    <span class="label label-primary">{{classSite.class_site.source_system}}</span>
  </p>

  <div ng-if="classSiteHistory" class="row">
    <div class="col-lg-6">
      <nvd3-line-plus-bar-chart data="scoreData" id="scoreChart" width="540" margin="{left:73}" xAxisTickFormat="xAxisTickFormatFunction()" y1AxisLabel="{{y1axislabeltext}}" y2AxisLabel="{{y2axislabeltext}}" y1AxisTickFormat="y1AxisTickFormat()" forceY="[0,100]"
      tooltipcontent="tooltipContentFunction()" legendWidth="400" showLegend="true" interactive="true" useInteractiveGuideLine="true" tooltips="true" forcey="[0,100]" xAxisLabel="Weeks">
        <svg></svg>
      </nvd3-line-plus-bar-chart>

      <div class="graph-caption">Score History</div>
    </div>


    <div class="col-lg-6">
      <nvd3-multi-bar-chart data="eventData" id="exampleId" width="530" height="350" margin="{left:73}" showXAxis="true" showYAxis="true" showLegend="true" forcey="[0,100]" interactive="true" useInteractiveGuideLine="true" tooltips="true" xAxisTickFormat="xAxisTickFormatFunction()"
      tooltipcontent="tooltipContentFunction()" isArea="true" noData="No Data For You!" xAxisLabel="Weeks" yAxisLabel="Percentile">
        <svg></svg>
      </nvd3-multi-bar-chart>
      <div class="graph-caption">Activity History</div>
    </div>
  </div>

  
  <div class="row assignments">
    <h3 class="main-less-weight">Assignments</h3>
    <hr class="main-no-margin-top">
    <div ng-if="assignments.length == 0" class="panel panel-info">
      <div class="panel-body">
        No assignements found for this student.
      </div>
    </div>

    <div ng-if="assignments.length > 0" class="table-responsive main-page-end-margin-bottom">
      <table class="table table-striped">
        <thead>
          <tr>
            <th scope="col">
              <a href="" ng-click="sortTypeAssignment = 'assignment.description'; sortReverse = !sortReverse">
            Assignment
            <span class="fa fa-caret-down" ng-show="sortTypeAssignment == 'assignment.description' &amp;&amp; !sortReverse"><span class="sr-only"> (ascending sort)</span></span>
            <span class="fa fa-caret-up" ng-show="sortTypeAssignment == 'assignment.description' &amp;&amp; sortReverse"><span class="sr-only"> (descending sort)</span></span>
          </a>
            </th>
            <th scope="col">
              <a href="" ng-click="sortTypeAssignment = 'due_date'; sortReverse = !sortReverse">
            Due Date
            <span class="fa fa-caret-down" ng-show="sortTypeAssignment == 'due_date' &amp;&amp; !sortReverse"><span class="sr-only"> (descending sort)</span></span>
            <span class="fa fa-caret-up" ng-show="sortTypeAssignment == 'due_date' &amp;&amp; sortReverse"><span class="sr-only"> (ascending sort)</span></span>
          </a>
            </th>
            <th scope="col">
              <a class="unsortable">Points Earned</a>
            </th>
            <th scope="col">
              <a class="unsortable">Points Possible</a>
            </th>
            <th scope="col">
              <a class="unsortable">Grader's Comment</a>
            </th>
          </tr>
        </thead>
        <tbody>
          <tr ng-repeat="assignment in assignments | orderBy:sortTypeAssignment:sortReverse | filter:searchAdvisor">
            <th scope="row">{{assignment.assignment.description }}</th>
            <td>{{assignment.due_date | date}}</td>
            <td>{{assignment.points_earned}}</td>
            <td>{{assignment.points_possible}}</td>
            <td>
              <span ng-if="assignment.grader_comment != '' &amp;&amp; assignment.grader_comment != null" 
                  class="glyphicon glyphicon-comment" aria-hidden="true"
                  title="{{assignment.grader_comment}}"
                  data-toggle="tooltip" data-placement="bottom" tooltip></span> <span class="sr-only">{{assignment.grader_comment}}</span>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <dig-data-fetch-progress progress="{{progress}}"></dig-data-fetch-progress>
</div>

<div ng-if="notFound" class="panel panel-warning not-found">
  <div class="panel-heading">
    <h3 class="panel-title">Not Found</h3>
  </div>
  <div class="panel-body">
    This student was not found in the requested course site.
  </div>
</div>
